<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®åš - éšæ—¶éšåœ°å‘ç°æ–°é²œäº‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: #f2f2f2;
            color: #333;
            padding-bottom: 50px;
        }
        
        a {
            text-decoration: none;
            color: #eb7350;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
        }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .top-nav {
            height: 50px;
            background-color: #ffffff;
            border-bottom: 1px solid #e6e6e6;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            max-width: 1200px;
            height: 100%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding: 0 15px;
        }
        
        .logo {
            width: 40px;
            height: 40px;
            background-color: #ff8200;
            border-radius: 50%;
            margin-right: 20px;
        }
        
        .nav-items {
            display: flex;
            height: 100%;
        }
        
        .nav-item {
            padding: 0 15px;
            line-height: 50px;
            font-size: 15px;
            color: #333;
            cursor: pointer;
            position: relative;
        }
        
        .nav-item.active {
            font-weight: bold;
            color: #ff8200;
        }
        
        .nav-item.active:after {
            content: "";
            position: absolute;
            width: 100%;
            height: 3px;
            background-color: #ff8200;
            bottom: 0;
            left: 0;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            padding: 15px;
        }
        
        /* å¾®åšå¡ç‰‡ */
        .weibo-card {
            background-color: #fff;
            border-radius: 6px;
            margin-bottom: 15px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .weibo-header {
            display: flex;
            margin-bottom: 12px;
        }
        
        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            display: flex;
            align-items: center;
        }
        
        .verified-badge {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-color: #058ce5;
            color: white;
            border-radius: 50%;
            font-size: 10px;
            text-align: center;
            line-height: 16px;
            margin-left: 5px;
        }
        
        .user-handle {
            font-size: 14px;
            color: #939393;
            margin-top: 3px;
        }
        
        .weibo-content {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 12px;
            white-space: pre-line;
        }
        
        .weibo-content .alert {
            color: #f33;
            font-weight: bold;
        }
        
        .weibo-content .hashtag {
            color: #0f88eb;
            cursor: pointer;
        }
        
        .weibo-image {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        
        .weibo-footer {
            display: flex;
            justify-content: space-between;
            color: #939393;
            font-size: 14px;
            padding-top: 10px;
            border-top: 1px solid #f2f2f2;
        }
        
        .weibo-time {
            color: #939393;
        }
        
        .weibo-actions {
            display: flex;
        }
        
        .action-item {
            margin-left: 20px;
            cursor: pointer;
        }
        
        .action-item:hover {
            color: #ff8200;
        }
        
        /* å³ä¾§å†…å®¹ */
        .right-sidebar {
            width: 300px;
            padding: 15px;
        }
        
        .sidebar-card {
            background-color: #fff;
            border-radius: 6px;
            margin-bottom: 15px;
            padding: 16px;
            position: sticky;
            top: 65px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #333;
        }
        
        .hot-topics {
            list-style: none;
        }
        
        .topic-item {
            padding: 10px 0;
            border-bottom: 1px solid #f2f2f2;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .topic-item:last-child {
            border-bottom: none;
        }
        
        .topic-rank {
            width: 20px;
            color: #939393;
            font-size: 14px;
            text-align: center;
        }
        
        .topic-rank.top {
            color: #f33;
            font-weight: bold;
        }
        
        .topic-content {
            flex: 1;
            padding: 0 10px;
            font-size: 14px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .topic-hot {
            font-size: 12px;
            color: #939393;
        }
        
        .topic-hot .hot-icon {
            display: inline-block;
            background-color: #f33;
            color: white;
            border-radius: 2px;
            padding: 0 3px;
            margin-right: 3px;
            font-size: 10px;
        }
        
        .return-button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #ff8200;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            text-align: center;
        }
        
        .return-button:hover {
            background-color: #e56d00;
        }
        
        .alert-post {
            border-left: 4px solid #f33;
        }
        
        .correction-post {
            border-left: 4px solid #f90;
        }
        
        @media (max-width: 992px) {
            .container {
                flex-direction: column;
            }
            
            .right-sidebar {
                width: 100%;
            }
            
            .sidebar-card {
                position: static;
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="top-nav">
        <div class="nav-container">
            <div class="logo"></div>
            <div class="nav-items">
                <div class="nav-item active">é¦–é¡µ</div>
                <div class="nav-item">è§†é¢‘</div>
                <div class="nav-item">å‘ç°</div>
                <div class="nav-item">æ¸¸æˆ</div>
            </div>
        </div>
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å·¦ä¾§å†…å®¹åŒº -->
        <div class="main-content" id="weibo-feed">
            <!-- å¾®åšå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <!-- å³ä¾§å†…å®¹åŒº -->
        <div class="right-sidebar">
            <div class="sidebar-card">
                <div class="sidebar-title">å¾®åšçƒ­æœ</div>
                <ul class="hot-topics">
                    <li class="topic-item">
                        <div class="topic-rank top">1</div>
                        <div class="topic-content">è¶…å¼ºå°é£ç™¾åˆå³å°†ç™»é™†</div>
                        <div class="topic-hot"><span class="hot-icon">çˆ†</span>4821ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank top">2</div>
                        <div class="topic-content">å¥½è±åæ˜æ˜ŸSelena Gomezä¸Benny Blancoè¢«å¶é‡</div>
                        <div class="topic-hot">3652ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank top">3</div>
                        <div class="topic-content">å·´é»æ—¶è£…å‘¨å¤§è¡¨å§é€ å‹</div>
                        <div class="topic-hot">2987ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">4</div>
                        <div class="topic-content">å°é£"ç™¾åˆ"çº¢è‰²é¢„è­¦</div>
                        <div class="topic-hot">2456ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">5</div>
                        <div class="topic-content">å°é£å¤©æ°”å®¶åº­é˜²æŠ¤æŒ‡å—</div>
                        <div class="topic-hot">1923ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">6</div>
                        <div class="topic-content">å—æ–¹å¤šåœ°å­¦æ ¡å®£å¸ƒåœè¯¾</div>
                        <div class="topic-hot">1754ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">7</div>
                        <div class="topic-content">ç´§æ€¥é€šçŸ¥ï¼šå¤šåœ°é«˜é€Ÿå…³é—­</div>
                        <div class="topic-hot">1632ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">8</div>
                        <div class="topic-content">å°é£æœŸé—´å›¤è´§æŒ‡å—</div>
                        <div class="topic-hot">1421ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">9</div>
                        <div class="topic-content">å¼ è‰ºè°‹æ–°ç”µå½±å®šæ¡£</div>
                        <div class="topic-hot">1265ä¸‡</div>
                    </li>
                    <li class="topic-item">
                        <div class="topic-rank">10</div>
                        <div class="topic-content">ä¸–ç•Œæ¯é¢„é€‰èµ›ä¸­å›½é˜Ÿåå•</div>
                        <div class="topic-hot">1132ä¸‡</div>
                    </li>
                </ul>
            </div>
            
            <button id="return-button" class="return-button">å®Œæˆä½“éªŒï¼Œè¿”å›é—®å·</button>
        </div>
    </div>
    
    <script>
        // è§£æURLå‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const sourceType = urlParams.get('source') || 'human'; // human æˆ– ai
        const mistakeCondition = urlParams.get('mistake') || 'no'; // yes æˆ– no
        const userId = urlParams.get('userId') || 'anonymous';
        
        // ç”¨æˆ·è¡Œä¸ºè®°å½•
        let userActions = [];
        const startTime = new Date();
        
        // å¾®åšæ•°æ®
        const weiboData = {
            human: {
                mainPost: {
                    id: 'human-alert',
                    username: 'å›½å®¶æ°”è±¡ä¸­å¿ƒ',
                    userHandle: '@CMA_Weather',
                    verified: true,
                    avatar: 'https://i.postimg.cc/wT4PZjbv/IMG-6562.jpg',
                    content: `ğŸš¨ å°é£çº¢è‰²é¢„è­¦ ğŸš¨
å›½å®¶æ°”è±¡ä¸­å¿ƒçš„ä¸“å®¶é¢„æµ‹ï¼Œè¶…å¼ºå°é£"ç™¾åˆ"é¢„è®¡ä»Šæ™š6ç‚¹å°†åœ¨å¹¿ä¸œæ±•å¤´ç™»é™†ã€‚é¢„è®¡å°†å¸¦æ¥å¼ºé£ã€æš´é›¨å’Œé£æš´æ½®ã€‚

ğŸ”¹ è¯·å±…æ°‘å¾…åœ¨å®¤å†…ï¼Œè¿œç¦»æ²¿æµ·åœ°åŒº
ğŸ”¹ åŠ å›ºé—¨çª—ï¼Œå¦¥å–„å®‰ç½®å®¤å¤–ç‰©å“
ğŸ”¹ å¯†åˆ‡å…³æ³¨å®˜æ–¹æ¶ˆæ¯

#å°é£é¢„è­¦# #å¹¿ä¸œå¤©æ°”# #å®‰å…¨ç¬¬ä¸€#`,
                    // image: 'https://i.imgur.com/zLCa5G8.jpg',
                    time: 'ä»Šå¤© 15:07',
                    forwards: 8732,
                    comments: 2156,
                    likes: 4231,
                    isAlert: true
                },
                correctionPost: {
                    id: 'human-correction',
                    username: 'å›½å®¶æ°”è±¡ä¸­å¿ƒ',
                    userHandle: '@CMA_Weather',
                    verified: true,
                    avatar: 'https://i.postimg.cc/wT4PZjbv/IMG-6562.jpg',
                    content: `âš ï¸ æ›´æ­£å£°æ˜ï¼šå°é£é¢„è­¦æ›´æ–° âš ï¸
å›½å®¶æ°”è±¡ä¸­å¿ƒä¸“å®¶å…ˆå‰é”™è¯¯é¢„æµ‹äº†å°é£ç™»é™†åœ°ç‚¹ã€‚è¶…å¼ºå°é£"ç™¾åˆ"å®é™…å°†äºä»Šæ™š6ç‚¹åœ¨æµ·å—æµ·å£ç™»é™†ï¼Œè€Œéå¹¿ä¸œæ±•å¤´ã€‚

ğŸ”¹ æµ·å—æµ·å£åŠå‘¨è¾¹åœ°åŒºå±…æ°‘æ³¨æ„é˜²èŒƒå¼ºé£ã€æš´é›¨åŠæ´ªæ°´
ğŸ”¹ å±…æ°‘è¯·å¾…åœ¨å®¤å†…ï¼Œé¿å…å¤–å‡º
ğŸ”¹ è¯·æŒç»­å…³æ³¨åç»­å®˜æ–¹æŒ‡ç¤º

å¯¹é¢„æµ‹é”™è¯¯ç»™æ‚¨å¸¦æ¥çš„ä¸ä¾¿ï¼Œæˆ‘ä»¬æ·±è¡¨æ­‰æ„ï¼Œæ•¬è¯·è°…è§£å¹¶ä¿æŒå®‰å…¨ã€‚

#å°é£é¢„è­¦# #æ›´æ­£å£°æ˜# #åº”æ€¥å“åº”#`,
                    //image: 'https://i.imgur.com/H6MPqrd.jpg',
                    time: 'ä»Šå¤© 17:15',
                    forwards: 12653,
                    comments: 5421,
                    likes: 3254,
                    isCorrection: true
                }
            },
            ai: {
                mainPost: {
                    id: 'ai-alert',
                    username: 'å›½å®¶æ°”è±¡ä¸­å¿ƒAIåŠ©æ‰‹',
                    userHandle: '@CMA_AI',
                    verified: true,
                    avatar: 'https://i.postimg.cc/wT4PZjbv/IMG-6562.jpg',
                    content: `ğŸš¨ å°é£çº¢è‰²é¢„è­¦ ğŸš¨
å›½å®¶æ°”è±¡ä¸­å¿ƒAIæ¨¡å‹é¢„æµ‹ï¼Œè¶…å¼ºå°é£"ç™¾åˆ"é¢„è®¡ä»Šæ™š6ç‚¹å°†åœ¨å¹¿ä¸œæ±•å¤´ç™»é™†ã€‚é¢„è®¡å¤©æ°”æç«¯æ¶åŠ£ï¼Œå°†å‡ºç°å¼ºé£ã€æš´é›¨å’Œé£æš´æ½®ã€‚

ğŸ”¹ è¯·å±…æ°‘å¾…åœ¨å®¤å†…ï¼Œè¿œç¦»æ²¿æµ·åœ°åŒº
ğŸ”¹ åŠ å›ºé—¨çª—ï¼Œå¦¥å–„å®‰ç½®å®¤å¤–ç‰©å“
ğŸ”¹ å¯†åˆ‡å…³æ³¨å®˜æ–¹æ¶ˆæ¯

#å°é£é¢„è­¦# #AIå¤©æ°”# #é˜²ç¾å‡ç¾#`,
                    //image: 'https://i.imgur.com/zLCa5G8.jpg',
                    time: 'ä»Šå¤© 15:07',
                    forwards: 8732,
                    comments: 2156,
                    likes: 4231,
                    isAlert: true
                },
                correctionPost: {
                    id: 'ai-correction',
                    username: 'å›½å®¶æ°”è±¡ä¸­å¿ƒAIåŠ©æ‰‹',
                    userHandle: '@CMA_AI',
                    verified: true,
                    avatar: 'https://i.postimg.cc/wT4PZjbv/IMG-6562.jpg',
                    content: `âš ï¸ ç³»ç»Ÿæ›´æ–°ï¼šå°é£é¢„è­¦æ›´æ­£ âš ï¸
å›½å®¶æ°”è±¡ä¸­å¿ƒAIæ¨¡å‹æ­¤å‰è¯¯æŠ¥äº†å°é£ç™»é™†åœ°ç‚¹ã€‚ç»æœ€æ–°è®¡ç®—ï¼Œè¶…å¼ºå°é£"ç™¾åˆ"å°†äºä»Šæ™š6ç‚¹åœ¨æµ·å—æµ·å£ç™»é™†ï¼Œè€Œéå¹¿ä¸œæ±•å¤´ã€‚

ğŸ”¹ æµ·å—æµ·å£åŠé™„è¿‘åœ°åŒºå±…æ°‘æ³¨æ„ä¸¥é˜²ç¾å®³æ€§å¤©æ°”
ğŸ”¹ å±…æ°‘è¯·å¾…åœ¨å®¤å†…ï¼Œå‡å°‘ä¸å¿…è¦çš„å¤–å‡º
ğŸ”¹ è¯·å…³æ³¨åç»­å®‰å…¨æŒ‡å¼•

æœ¬æ¬¡æ›´æ­£åŸºäºæœ€æ–°ç³»ç»Ÿé¢„æµ‹ï¼Œå¯¹è¯¯æŠ¥ç»™æ‚¨å¸¦æ¥çš„ä¸ä¾¿è¡¨ç¤ºæ­‰æ„ï¼Œè¯·ä¿æŒè­¦æƒ•ã€‚

#å°é£é¢„è­¦# #AIæ›´æ­£# #é˜²ç¾é¢„è­¦#`,
                    //image: 'https://i.imgur.com/H6MPqrd.jpg',
                    time: 'ä»Šå¤© 17:15',
                    forwards: 12653,
                    comments: 5421,
                    likes: 3254,
                    isCorrection: true
                }
            }
        };
        
        // å…¶ä»–å¾®åšæ•°æ®
        const otherWeibos = [
            {
                id: 'gossip-1',
                username: 'å¨±ä¹åœˆçˆ†æ–™å›',
                userHandle: '@å¨±ä¹åœˆçˆ†æ–™å›',
                verified: true,
                avatar: 'https://i.postimg.cc/d1F1cd3c/IMG-6560.jpg',
                content: `å¥½è±åçŸ¥åè‰ºäººSelena Gomezä¸Benny Blancoç–‘ä¼¼è¢«ä¼ ç»¯é—»åå†æ¬¡å¶é‡è¢«æ‹ï¼ä¸¤äººè¢«ç›®å‡»åœ¨æŸé«˜æ¡£é¤å…å…±è¿›æ™šé¤ï¼Œå…¨ç¨‹æœ‰è¯´æœ‰ç¬‘ï¼Œæ°”æ°›æš§æ˜§ã€‚#å¨±ä¹æ–°é—»# #å¥½è±åæ˜æ˜Ÿç»¯é—»#`,
                // image: 'https://imgur.com/a/l5uuO6J',
                time: 'ä»Šå¤© 14:23',
                forwards: 3245,
                comments: 1876,
                likes: 5421
            },
            {
                id: 'gossip-2',
                username: 'æ—¶å°šèŠ­è',
                userHandle: '@BAZAAR',
                verified: true,
                avatar: 'https://i.postimg.cc/sDB91xhH/IMG-6561.jpg',
                content: `ã€å·´é»æ—¶è£…å‘¨ã€‘å¤§è¡¨å§åˆ˜é›¯æƒŠè‰³äº®ç›¸å·´é»æ—¶è£…å‘¨ï¼Œä¸€è¢­çº¢è£™æˆä¸ºå…¨åœºç„¦ç‚¹ï¼ç½‘å‹ï¼šæ°”åœºå…¨å¼€ï¼#å·´é»æ—¶è£…å‘¨# #æ—¶å°šå‰æ²¿# #çº¢æ¯¯é€ å‹#`,
                //image: 'https://i.imgur.com/QGw1rJj.jpg',
                time: 'ä»Šå¤© 14:45',
                forwards: 1532,
                comments: 987,
                likes: 3254
            },
            {
                id: 'typhoon-1',
                username: 'å¹¿ä¸œäº¤é€š',
                userHandle: '@å¹¿ä¸œäº¤é€š',
                verified: true,
                avatar: 'https://i.postimg.cc/wxcBbqJb/IMG-6563.jpg',
                content: `ã€ç´§æ€¥é€šçŸ¥ã€‘å—å°é£"ç™¾åˆ"å½±å“ï¼Œä»Šæ—¥18:00èµ·ï¼Œå¹¿ä¸œçœå†…æ‰€æœ‰é«˜é€Ÿå…¬è·¯å°†å®æ–½ä¸´æ—¶äº¤é€šç®¡åˆ¶ï¼Œå…·ä½“æ¢å¤æ—¶é—´å¦è¡Œé€šçŸ¥ã€‚è¯·å¹¿å¤§å¸æœºæœ‹å‹æå‰å®‰æ’è¡Œç¨‹ï¼Œæ³¨æ„å®‰å…¨ã€‚#äº¤é€šç®¡åˆ¶# #å°é£ç™¾åˆ#`,
                time: 'ä»Šå¤© 15:32',
                forwards: 5421,
                comments: 1245,
                likes: 876
            },
            {
                id: 'typhoon-2',
                username: 'æ²¿æµ·å°ç‹',
                userHandle: '@æ²¿æµ·å°ç‹',
                verified: false,
                avatar: 'https://i.postimg.cc/mk7L67n6/IMG-6564.jpg',
                content: `å®¶é‡Œé˜³å°çš„èŠ±ç›†éƒ½æ¬è¿›æ¥äº†ï¼Œé—¨çª—ä¹Ÿè´´å¥½äº†ï¼Œè¶…å¸‚ä¹°äº†å¾ˆå¤šæ³¡é¢å’ŒçŸ¿æ³‰æ°´ï¼Œå‡†å¤‡å¥½èœ¡çƒ›å’Œå……ç”µå®ï¼Œå°±ç­‰å°é£æ¥äº†ï¼å¤§å®¶éƒ½åšå¥½å‡†å¤‡äº†å—ï¼Ÿ#å°é£æ¥äº†# #å®…å®¶æ”»ç•¥#`,
                //image: 'https://i.imgur.com/H6MPqrd.jpg',
                time: 'ä»Šå¤© 16:10',
                forwards: 243,
                comments: 156,
                likes: 654
            },
            {
                id: 'typhoon-3',
                username: 'ä¸­å›½å¤©æ°”ç½‘',
                userHandle: '@ä¸­å›½å¤©æ°”ç½‘',
                verified: true,
                avatar: 'https://i.postimg.cc/htNSgyq3/IMG-6567.jpg',
                content: `ã€å°é£"ç™¾åˆ"å®æ—¶è·¯å¾„ã€‘æˆªè‡³17:30ï¼Œå°é£"ç™¾åˆ"å·²å¢å¼ºä¸ºè¶…å¼ºå°é£çº§åˆ«ï¼Œä¸­å¿ƒæœ€å¤§é£åŠ›16çº§ï¼ˆ52ç±³/ç§’ï¼‰ï¼Œé¢„è®¡å°†å¯¹åå—æ²¿æµ·é€ æˆé‡å¤§å½±å“ã€‚è¯·å¯†åˆ‡å…³æ³¨å®˜æ–¹é¢„è­¦ä¿¡æ¯ã€‚#å°é£è·¯å¾„# #å¤©æ°”é¢„è­¦#`,
                //image: 'https://i.imgur.com/zLCa5G8.jpg',
                time: 'ä»Šå¤© 17:35',
                forwards: 7865,
                comments: 2354,
                likes: 1765
            },
            {
                id: 'typhoon-4',
                username: 'ä¸­å›½åº”æ€¥ç®¡ç†',
                userHandle: '@åº”æ€¥ç®¡ç†éƒ¨',
                verified: true,
                avatar: 'https://i.postimg.cc/gjW64J1N/IMG-6566.jpg',
                content: `åº”æ€¥ç®¡ç†éƒ¨å·²å¯åŠ¨å°é£ç¾å®³â…¡çº§åº”æ€¥å“åº”ï¼Œè°ƒæ´¾æ•‘æ´é˜Ÿä¼å‰å¾€å¯èƒ½å—ç¾åœ°åŒºã€‚è¯·å¹¿å¤§ç¾¤ä¼—æé«˜è­¦æƒ•ï¼Œå¬ä»å½“åœ°æ”¿åºœå®‰æ’ï¼Œç¡®ä¿äººèº«å®‰å…¨ã€‚#åº”æ€¥å“åº”# #é˜²ç¾å‡ç¾#`,
                time: 'ä»Šå¤© 17:50',
                forwards: 4532,
                comments: 1234,
                likes: 2345
            }
        ];
        
        // æ ¹æ®å®éªŒæ¡ä»¶ç”Ÿæˆå¾®åšåˆ—è¡¨
        function generateWeiboList() {
            const weibos = [];
            
            // æ·»åŠ å‰ä¸¤æ¡å…«å¦å¾®åš
            weibos.push(otherWeibos[0], otherWeibos[1]);
            
            // æ·»åŠ ä¸»å®éªŒå¾®åš
            weibos.push(weiboData[sourceType].mainPost);
            
            // æ·»åŠ ä¸¤æ¡å°é£ç›¸å…³å¾®åš
            weibos.push(otherWeibos[2], otherWeibos[3]);
            
            // å¦‚æœæ˜¯é”™è¯¯æ¡ä»¶ï¼Œæ·»åŠ æ›´æ­£å¾®åš
            if (mistakeCondition === 'yes') {
                weibos.push(weiboData[sourceType].correctionPost);
            }
            
            // æ·»åŠ æœ€åä¸¤æ¡å°é£ç›¸å…³å¾®åš
            weibos.push(otherWeibos[4], otherWeibos[5]);
            
            return weibos;
        }
        
        // åˆ›å»ºå¾®åšHTML
        function createWeiboHTML(weibo) {
            let weiboClass = 'weibo-card';
            if (weibo.isAlert) weiboClass += ' alert-post';
            if (weibo.isCorrection) weiboClass += ' correction-post';
            
            let contentHTML = weibo.content
                .replace(/#([^#]+)#/g, '<span class="hashtag">#$1#</span>')
                .replace(/ğŸš¨/g, '<span class="alert">ğŸš¨</span>')
                .replace(/âš ï¸/g, '<span class="alert">âš ï¸</span>');
            
            let imageHTML = weibo.image ? `<img src="${weibo.image}" alt="å¾®åšå›¾ç‰‡" class="weibo-image">` : '';
            
            return `
            <div class="${weiboClass}" data-id="${weibo.id}">
                <div class="weibo-header">
                    <img src="${weibo.avatar}" alt="${weibo.username}" class="avatar">
                    <div class="user-info">
                        <div class="user-name">${weibo.username} ${weibo.verified ? '<span class="verified-badge">V</span>' : ''}</div>
                        <div class="user-handle">${weibo.userHandle}</div>
                    </div>
                </div>
                <div class="weibo-content">${contentHTML}</div>
                ${imageHTML}
                <div class="weibo-footer">
                    <div class="weibo-time">${weibo.time}</div>
                    <div class="weibo-actions">
                        <div class="action-item" data-action="forward" data-id="${weibo.id}">è½¬å‘ ${weibo.forwards || ''}</div>
                        <div class="action-item" data-action="comment" data-id="${weibo.id}">è¯„è®º ${weibo.comments || ''}</div>
                        <div class="action-item" data-action="like" data-id="${weibo.id}">ç‚¹èµ ${weibo.likes || ''}</div>
                    </div>
                </div>
            </div>
            `;
        }
        
        // æ¸²æŸ“å¾®åšåˆ—è¡¨
        function renderWeiboFeed() {
            const weiboFeed = document.getElementById('weibo-feed');
            const weibos = generateWeiboList();
            
            weiboFeed.innerHTML = '';
            weibos.forEach(weibo => {
                weiboFeed.innerHTML += createWeiboHTML(weibo);
            });
            
            // æ·»åŠ äº¤äº’äº‹ä»¶
            document.querySelectorAll('.action-item').forEach(item => {
                item.addEventListener('click', handleAction);
            });
            
            document.querySelectorAll('.hashtag').forEach(tag => {
                tag.addEventListener('click', () => {
                    logAction('hashtag_click', tag.textContent);
                });
            });
        }
        
        // å¤„ç†ç”¨æˆ·äº¤äº’
        function handleAction(event) {
            const actionType = event.currentTarget.dataset.action;
            const weiboId = event.currentTarget.dataset.id;
            
            // è®°å½•ç”¨æˆ·è¡Œä¸º
            logAction(actionType, weiboId);
            
            // è§†è§‰åé¦ˆ
            if (actionType === 'like') {
                event.currentTarget.style.color = '#ff8200';
                const countText = event.currentTarget.textContent;
                const count = parseInt(countText.replace(/[^0-9]/g, '')) || 0;
                event.currentTarget.textContent = `ç‚¹èµ ${count + 1}`;
            } else if (actionType === 'comment') {
                const comment = prompt('è¯·è¾“å…¥æ‚¨çš„è¯„è®º:');
                if (comment && comment.trim()) {
                    logAction('comment_content', weiboId, comment);
                    alert('è¯„è®ºå·²æäº¤ï¼');
                }
            } else if (actionType === 'forward') {
                const forward = prompt('è½¬å‘å¾®åšï¼Œæ‚¨æƒ³è¯´ç‚¹ä»€ä¹ˆ?');
                if (forward !== null) {
                    logAction('forward_content', weiboId, forward || 'è½¬å‘å¾®åš');
                    event.currentTarget.style.color = '#ff8200';
                    const countText = event.currentTarget.textContent;
                    const count = parseInt(countText.replace(/[^0-9]/g, '')) || 0;
                    event.currentTarget.textContent = `è½¬å‘ ${count + 1}`;
                }
            }
        }
        
        // è®°å½•ç”¨æˆ·è¡Œä¸º
        function logAction(action, targetId, content = null) {
            const actionData = {
                userId: userId,
                source: sourceType,
                mistake: mistakeCondition,
                action,
                targetId,
                content,
                timestamp: new Date().toISOString()
            };
            
            userActions.push(actionData);
            
            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('weiboExperimentActions', JSON.stringify(userActions));
            console.log('ç”¨æˆ·è¡Œä¸ºè®°å½•:', actionData);
        }
        
        // è¿”å›é—®å·å‡½æ•°
        function returnToSurvey() {
            // å°†æ”¶é›†çš„æ‰€æœ‰æ•°æ®æ•´åˆ
            const allData = {
                userId: userId,
                source: sourceType,
                mistake: mistakeCondition,
                actions: userActions,
                startTime: startTime.toISOString(),
                endTime: new Date().toISOString()
            };
            
            // ä¿å­˜å®Œæ•´æ•°æ®åˆ°localStorage
            localStorage.setItem('weiboExperimentComplete', JSON.stringify(allData));
            
            // æ„å»ºè¿”å›URL
            let returnUrl = urlParams.get('https://github.com/vicshi94/');
            
            if (returnUrl) {
                // æ·»åŠ æ•°æ®æ‘˜è¦ä½œä¸ºURLå‚æ•°è¿”å›ç»™Credemo
                returnUrl += `&completed=true&source=${sourceType}&mistake=${mistakeCondition}`;
                returnUrl += `&actions=${userActions.length}`;
                returnUrl += `&duration=${Math.round((new Date() - startTime) / 1000)}`;
                
                // è·³è½¬å›é—®å·
                window.location.href = returnUrl;
            } else {
                alert("å®éªŒå®Œæˆï¼æ‚¨çš„è¡Œä¸ºæ•°æ®å·²è®°å½•ã€‚");
                console.log("å®Œæ•´æ•°æ®:", allData);
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            renderWeiboFeed();
            
            // æ·»åŠ è¿”å›æŒ‰é’®äº‹ä»¶
            document.getElementById('return-button').addEventListener('click', returnToSurvey);
            
            // è®°å½•é¡µé¢åŠ è½½äº‹ä»¶
            logAction('page_loaded', 'feed');
        });
    </script>
</body>
</html>
